<DialogueTree xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/Outer-Wilds-New-Horizons/new-horizons/main/NewHorizons/Schemas/dialogue_schema.xsd">
	<DialogueNode>
		<Name>GabbroMenu</Name>
		<DialogueOptionsList>
			<DialogueOption>
				<RequiredCondition>RH_ATPDOWN</RequiredCondition>
				<CancelledCondition>RH_AWCHELD</CancelledCondition>
				<RequiredLogCondition>TT_TIME_LOOP_DEVICE_X3</RequiredLogCondition>
				<CancelledPersistentCondition>GABBRO_LOOPEND_TOLD</CancelledPersistentCondition>
				<Text>I shut off the time loop.</Text>
				<DialogueTarget>Gabbro_NoMoreLoop_2_NotHolding</DialogueTarget>
			</DialogueOption>
			<DialogueOption>
				<RequiredCondition>RH_AWCHELD</RequiredCondition>
				<RequiredLogCondition>TT_TIME_LOOP_DEVICE_X3</RequiredLogCondition>
				<CancelledPersistentCondition>GABBRO_LOOPEND_TOLD</CancelledPersistentCondition>
				<Text>I shut off the time loop. This is the core.</Text>
				<DialogueTarget>Gabbro_NoMoreLoop_2_Holding</DialogueTarget>
			</DialogueOption>
		</DialogueOptionsList>
	</DialogueNode>

	<DialogueNode>
		<Name>Gabbro_RH_Hugged</Name>
		<EntryCondition>RH_GABBRO_HUGGED</EntryCondition>
		<Dialogue>
			<Page>Whoa! Thanks there, bud. It gets kinda lonely out here sometimes.</Page>
		</Dialogue>
		<DialogueTarget>GabbroMenu</DialogueTarget>
		<ConditionToCancel>RH_GABBRO_HUGGED</ConditionToCancel>
	</DialogueNode>
	
	<!-- Reactions -->
	<DialogueNode>
		<Name>Gabbro_NoMoreLoop_2_NotHolding</Name>
		<Dialogue>
			<Page>What?! No, no, the sun's about to go supernova again! For Hearth's sake, turn it back on!</Page>
		</Dialogue>
		<SetPersistentCondition>GABBRO_RH_SECONDLOOP_CANCEL</SetPersistentCondition>
		<SetPersistentCondition>GABBRO_LOOPEND_TOLD</SetPersistentCondition>
		<SetCondition>GABBRO_LOOPEND_DISTRAUGHT</SetCondition>
	</DialogueNode>
	<DialogueNode>
		<Name>Gabbro_NoMoreLoop_2_Holding</Name>
		<Dialogue>
			<Page>What?! No, no, the sun's about to go supernova again! For Hearth's sake, put it back!</Page>
		</Dialogue>
		<SetPersistentCondition>GABBRO_LOOPEND_TOLD_HOLDING</SetPersistentCondition>
		<SetPersistentCondition>GABBRO_RH_SECONDLOOP_CANCEL</SetPersistentCondition>
		<SetPersistentCondition>GABBRO_LOOPEND_TOLD</SetPersistentCondition>
		<SetCondition>GABBRO_LOOPEND_DISTRAUGHT</SetCondition>
	</DialogueNode>
	
	<!-- Chicken from the prior loop -->
	<DialogueNode>
		<Name>Gabbro_LoopEnd_1_Chicken</Name>
		<EntryCondition>GABBRO_RH_FIRSTLOOP_CANCEL</EntryCondition>
		<Dialogue>
			<Page>Huh. Alright, so, either that thing you did to stop the time loop from happening didn't work, or you chickened out, because I <![CDATA[<i>definitely</i>]]> just died and came back to life.</Page>
			<Page>I assume it happened to you too, right?</Page>
		</Dialogue>
		<DialogueOptionsList>
			<DialogueOption>
				<RequiredPersistentCondition>MetGabbro_Loop1</RequiredPersistentCondition>
				<Text>Oh yeah, we definitely died.</Text>
				<DialogueTarget>Gabbro2T_2</DialogueTarget>
			</DialogueOption>
			<DialogueOption>
				<RequiredPersistentCondition>MetGabbro_Loop1</RequiredPersistentCondition>
				<Text>I think we’re the only ones who know.</Text>
				<DialogueTarget>Gabbro2T_3</DialogueTarget>
			</DialogueOption>
			<DialogueOption>
				<CancelledPersistentCondition>MetGabbro_Loop1</CancelledPersistentCondition>
				<Text>Oh yeah, we definitely died.</Text>
				<DialogueTarget>Gabbro2F_2</DialogueTarget>
			</DialogueOption>
			<DialogueOption>
				<CancelledPersistentCondition>MetGabbro_Loop1</CancelledPersistentCondition>
				<Text>I think we’re the only ones who know.</Text>
				<DialogueTarget>Gabbro2F_3</DialogueTarget>
			</DialogueOption>
		</DialogueOptionsList>
		<SetCondition>SaidHiToGabbro</SetCondition>
	</DialogueNode>
	
	<!-- Panic -->
	<DialogueNode>
		<Name>Gabbro_LoopEnd_Distraught</Name>
		<EntryCondition>GABBRO_LOOPEND_DISTRAUGHT</EntryCondition>
		<Dialogue>
			<Page>…Hearth… no, not yet. Not yet!</Page>
		</Dialogue>
	</DialogueNode>

	<!-- Ship breach dialogue -->
	<DialogueNode>
		<Name>GabbroMenu</Name>
		<DialogueOptionsList>
			<DialogueOption>
				<RequiredCondition>RH_SHIP_BREACH</RequiredCondition>
				<CancelledCondition>RH_GABBRO_SHIP_BREACH_TALKED</CancelledCondition>
				<CancelledPersistentCondition>RH_GABBRO_SHIP_BREACH_EVER_TALKED</CancelledPersistentCondition>
				<Text>My ship's completely busted.</Text>
				<DialogueTarget>Gabbro_RH_ShipHullBreach_Admit</DialogueTarget>
			</DialogueOption>
			<DialogueOption>
				<RequiredCondition>RH_SHIP_BREACH</RequiredCondition>
				<CancelledCondition>RH_GABBRO_SHIP_BREACH_TALKED</CancelledCondition>
				<RequiredPersistentCondition>RH_GABBRO_SHIP_BREACH_EVER_TALKED</RequiredPersistentCondition>
				<Text>I totalled my ship again.</Text>
				<DialogueTarget>Gabbro_RH_ShipHullBreach_Admit</DialogueTarget>
			</DialogueOption>
		</DialogueOptionsList>
	</DialogueNode>

	<DialogueNode>
		<Name>Gabbro_RH_ShipHullBreach_Admit</Name>

		<Dialogue>
			<Page>Huh. Well, you know, usually I'd say that's pretty bad, but given that we died and came back to life… maybe it's nothing to worry about?</Page>
			<Page>I dunno. I guess we'll just have to see what happens.</Page>
		</Dialogue>

		<SetCondition>RH_GABBRO_SHIP_BREACH_TALKED</SetCondition>
		<SetPersistentCondition>RH_GABBRO_SHIP_BREACH_EVER_TALKED</SetPersistentCondition>
		<DialogueTarget>GabbroMenu</DialogueTarget>
	</DialogueNode>
</DialogueTree>